import{h as l,a as m}from"./headers-RPXbKLV3.js";import{A as f}from"./constants-Dyo2zk30.js";async function u({title:e,body:a,media:r,tags:s}){const n={method:"POST",headers:l(),body:JSON.stringify({title:e,body:a,media:r,tags:s})};try{const t=await fetch(f,n),i=await t.json();if(!t.ok)throw new Error(i.message||"Failed to create post");return i}catch(t){throw console.error("Detailed API Error:",t),t}}async function p(e){e.preventDefault();const a=e.target,r=new FormData(a),s=r.get("title").trim(),n=r.get("body").trim(),t=r.get("media").trim(),i=r.get("alt").trim(),c=r.get("tags").trim().split(",").map(o=>o.trim()).filter(Boolean);if(!s||!n){alert("Title and body are required fields.");return}const d={title:s,body:n,media:t?{url:t,alt:i}:void 0,tags:c};try{const o=await u(d);if(o&&o.data.id)alert("Post created successfully!"),a.reset(),setTimeout(()=>{window.location.href="/"},2e3);else throw new Error("Invalid response format")}catch(o){console.error("Error creating post:",o),alert(`Error creating post: ${o.message}`)}}m();function g(){const e=document.querySelector("#create-post");e?e.addEventListener("submit",a=>{p(a)}):console.error("Form not found")}g();
