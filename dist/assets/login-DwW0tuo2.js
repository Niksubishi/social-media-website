import{a as l}from"./constants-Dyo2zk30.js";async function d({email:r,password:o}){try{const e=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})}),n=await e.json();if(!e.ok)throw new Error(n.message||"Login failed. Please check your credentials.");return n}catch(e){throw console.error("Error in login:",e),e}}async function m(r){r.preventDefault();const o=r.target,e=o.email.value.trim(),n=o.password.value.trim();try{const t=await d({email:e,password:n});localStorage.setItem("token",t.data.accessToken),localStorage.setItem("username",t.data.name),window.location.href="/"}catch(t){const i=t.message||"An error occurred. Please try again later.",a=document.querySelector("#login-error");a&&(a.textContent=i,a.style.color="red"),console.error("Login error:",t)}}const s=document.forms.login,c=document.createElement("div");c.id="login-error";s.appendChild(c);s.addEventListener("submit",async r=>{r.preventDefault();const o=document.querySelector("button");o.disabled=!0;try{await m(r)}catch(e){console.error("Error in login:",e.message)}finally{o.disabled=!1}});
