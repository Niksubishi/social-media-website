import{c}from"./constants-rqNHC8Ty.js";import{v as d,i as g,a as f}from"./passwordUtils-BFr2e6nP.js";import{i as m}from"./navigation-BhUJQ3dQ.js";async function u({name:o,email:s,password:i,bio:n,avatar:l,banner:t}){try{const r=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,email:s,password:i,bio:n,avatar:l,banner:t})}),e=await r.json();if(!r.ok){let a="Failed to register";throw e.errors&&Array.isArray(e.errors)&&e.errors[0]?.message?a=e.errors[0].message:e.error&&typeof e.error=="string"?a=e.error:e.message?a=e.message:console.error("Unexpected error structure:",e),new Error(a)}return e}catch(r){throw console.error("Error in register:",r),r}}async function p(o){o.preventDefault();const s=o.target,i=s.name.value,n=s.email.value,l=s.password.value;s.passwordRepeat.value;const t=s.querySelector("button");if(d("password","password-repeat","password-mismatch-error"))try{t.disabled=!0,t.textContent="Registering...";const r=await u({name:i,email:n,password:l});alert("Registration successful!"),window.location.href="/auth/login/"}catch(r){console.error("Registration failed:",r),alert("Registration failed. Please try again.")}finally{t.disabled=!1,t.textContent="Register"}}m();g();f();const w=document.forms.register;w.addEventListener("submit",p);
